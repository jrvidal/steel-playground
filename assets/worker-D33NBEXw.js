(function(){"use strict";let r;function m(e){const n=r.__externref_table_alloc();return r.__wbindgen_export_2.set(n,e),n}function v(e,n){try{return e.apply(this,n)}catch(t){const i=m(t);r.__wbindgen_exn_store(i)}}let g=null;function b(){return(g===null||g.byteLength===0)&&(g=new Uint8Array(r.memory.buffer)),g}function M(e,n){return e=e>>>0,b().subarray(e/1,e/1+n)}const S=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&S.decode();function f(e,n){return e=e>>>0,S.decode(b().subarray(e,e+n))}let l=0;const y=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},O=typeof y.encodeInto=="function"?function(e,n){return y.encodeInto(e,n)}:function(e,n){const t=y.encode(e);return n.set(t),{read:e.length,written:t.length}};function d(e,n,t){if(t===void 0){const s=y.encode(e),a=n(s.length,1)>>>0;return b().subarray(a,a+s.length).set(s),l=s.length,a}let i=e.length,o=n(i,1)>>>0;const _=b();let c=0;for(;c<i;c++){const s=e.charCodeAt(c);if(s>127)break;_[o+c]=s}if(c!==i){c!==0&&(e=e.slice(c)),o=t(o,i,i=c+e.length*3,1)>>>0;const s=b().subarray(o+c,o+i),a=O(e,s);c+=a.written,o=t(o,i,c,1)>>>0}return l=c,o}function u(e){const n=r.__wbindgen_export_2.get(e);return r.__externref_table_dealloc(e),n}function A(e){return e==null}function P(e,n,t,i){let o,_;try{const a=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),x=l,w=r.run_script(a,x,n,t,A(i)?0:m(i));var c=w[0],s=w[1];if(w[3])throw c=0,s=0,u(w[2]);return o=c,_=s,f(c,s)}finally{r.__wbindgen_free(o,_,1)}}function j(e){let n,t;try{const _=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),c=l,s=r.compile_script(_,c);var i=s[0],o=s[1];if(s[3])throw i=0,o=0,u(s[2]);return n=i,t=o,f(i,o)}finally{r.__wbindgen_free(n,t,1)}}function U(e){let n,t;try{const _=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),c=l,s=r.compile_ast(_,c);var i=s[0],o=s[1];if(s[3])throw i=0,o=0,u(s[2]);return n=i,t=o,f(i,o)}finally{r.__wbindgen_free(n,t,1)}}function I(e){let n,t;try{const _=d(e,r.__wbindgen_malloc,r.__wbindgen_realloc),c=l,s=r.compile_expanded_ast(_,c);var i=s[0],o=s[1];if(s[3])throw i=0,o=0,u(s[2]);return n=i,t=o,f(i,o)}finally{r.__wbindgen_free(n,t,1)}}function L(){r.main_js()}const E=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_playground_free(e>>>0,1));class F{__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,E.unregister(this),n}free(){const n=this.__destroy_into_raw();r.__wbg_playground_free(n,0)}constructor(){const n=r.playground_new();return this.__wbg_ptr=n>>>0,E.register(this,this.__wbg_ptr,this),this}compileScript(n){let t,i;try{const c=d(n,r.__wbindgen_malloc,r.__wbindgen_realloc),s=l,a=r.playground_compileScript(this.__wbg_ptr,c,s);var o=a[0],_=a[1];if(a[3])throw o=0,_=0,u(a[2]);return t=o,i=_,f(o,_)}finally{r.__wbindgen_free(t,i,1)}}compileAst(n){let t,i;try{const c=d(n,r.__wbindgen_malloc,r.__wbindgen_realloc),s=l,a=r.playground_compileAst(this.__wbg_ptr,c,s);var o=a[0],_=a[1];if(a[3])throw o=0,_=0,u(a[2]);return t=o,i=_,f(o,_)}finally{r.__wbindgen_free(t,i,1)}}compileExpandedAst(n){let t,i;try{const c=d(n,r.__wbindgen_malloc,r.__wbindgen_realloc),s=l,a=r.playground_compileExpandedAst(this.__wbg_ptr,c,s);var o=a[0],_=a[1];if(a[3])throw o=0,_=0,u(a[2]);return t=o,i=_,f(o,_)}finally{r.__wbindgen_free(t,i,1)}}runScript(n,t,i,o){let _,c;try{const x=d(n,r.__wbindgen_malloc,r.__wbindgen_realloc),w=l,p=r.playground_runScript(this.__wbg_ptr,x,w,t,i,A(o)?0:m(o));var s=p[0],a=p[1];if(p[3])throw s=0,a=0,u(p[2]);return _=s,c=a,f(s,a)}finally{r.__wbindgen_free(_,c,1)}}}async function q(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(i){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",i);else throw i}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function T(){const e={};return e.wbg={},e.wbg.__wbg_call_7cccdd69e0791ae2=function(){return v(function(n,t,i){return n.call(t,i)},arguments)},e.wbg.__wbg_getRandomValues_3c9c0d586e575a16=function(){return v(function(n,t){globalThis.crypto.getRandomValues(M(n,t))},arguments)},e.wbg.__wbindgen_init_externref_table=function(){const n=r.__wbindgen_export_2,t=n.grow(4);n.set(0,void 0),n.set(t+0,void 0),n.set(t+1,null),n.set(t+2,!0),n.set(t+3,!1)},e.wbg.__wbindgen_string_new=function(n,t){return f(n,t)},e.wbg.__wbindgen_throw=function(n,t){throw new Error(f(n,t))},e}function W(e,n){return r=e.exports,h.__wbindgen_wasm_module=n,g=null,r.__wbindgen_start(),r}function z(e){if(r!==void 0)return r;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module:e}=e:console.warn("using deprecated parameters for `initSync()`; pass a single object instead"));const n=T();e instanceof WebAssembly.Module||(e=new WebAssembly.Module(e));const t=new WebAssembly.Instance(e,n);return W(t,e)}async function h(e){if(r!==void 0)return r;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL(""+new URL("web_wasm_bg-B4ZSmZll.wasm",self.location.href).href,self.location.href));const n=T();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:t,module:i}=await q(await e,n);return W(t,i)}var D=Object.freeze({__proto__:null,Playground:F,compile_ast:U,compile_expanded_ast:I,compile_script:j,default:h,initSync:z,main_js:L,run_script:P});const R=h().then(e=>D),$=R.then(e=>new e.Playground);async function k(e){const n=await $;function t(i){self.postMessage({req:"runScript/output",output:i})}try{let i=n.runScript(e,o=>{t(`[PRINT] ${o}`)},o=>{t(`[DEBUG] ${o}`)},o=>{self.postMessage({req:"runScript/updateOps",ops:o})});t(`

Script returned: 

${i}
`)}catch(i){t(`

EXCEPTION: ${i}`)}postMessage({req:"runScript/end"})}self.onmessage=e=>{e.data.req==="runScript"?k(e.data.script):console.log("Unknown message received by worker:",e.data)},R.then(()=>{self.postMessage({req:"_ready"})})})();
